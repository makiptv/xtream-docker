import{B as g,u as P,I as Me,w as N,N as fe,O as ze,r as k,E as ge,D as G,Q as ke,R as K,J as xe,z as ce,G as le,F as ue,H as ne,K as ye,L as U,S as Ve,o as j,a as L,b as _,t as ee,l as te,h as W,i as X,f as pe,j as Ae,k as De,m as Pe,n as se}from"./app-wF5SolYh.js";import{u as J,o as O,w as $e,e as Fe,b as oe,E as _e,A as Z,f as ve,a as ae,i as Be,c as ie,l as je,O as Le,d as D,n as Ne,r as Ke}from"./XMarkIcon-BhqYf4eJ.js";import{o as de,a as he,S as We}from"./transition-CkXZVhaw.js";import{c as V,f as me,s as Ue,i as qe,u as He}from"./AppLayout-DCUwBhsa.js";import{f as Je,u as Ge}from"./hidden-BqmzDmTH.js";function H(l,s,t){let o=t.initialDeps??[],e;return()=>{var a,i,n,h;let c;t.key&&((a=t.debug)!=null&&a.call(t))&&(c=Date.now());const r=l();if(!(r.length!==o.length||r.some((I,C)=>o[C]!==I)))return e;o=r;let y;if(t.key&&((i=t.debug)!=null&&i.call(t))&&(y=Date.now()),e=s(...r),t.key&&((n=t.debug)!=null&&n.call(t))){const I=Math.round((Date.now()-c)*100)/100,C=Math.round((Date.now()-y)*100)/100,A=C/16,$=(z,b)=>{for(z=String(z);z.length<b;)z=" "+z;return z};console.info(`%câ± ${$(C,5)} /${$(I,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*A,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(h=t==null?void 0:t.onChange)==null||h.call(t,e),e}}function re(l,s){if(l===void 0)throw new Error("Unexpected undefined");return l}const Qe=(l,s)=>Math.abs(l-s)<1,Ye=(l,s,t)=>{let o;return function(...e){l.clearTimeout(o),o=l.setTimeout(()=>s.apply(this,e),t)}},Xe=l=>l,Ze=l=>{const s=Math.max(l.startIndex-l.overscan,0),t=Math.min(l.endIndex+l.overscan,l.count-1),o=[];for(let e=s;e<=t;e++)o.push(e);return o},et=(l,s)=>{const t=l.scrollElement;if(!t)return;const o=l.targetWindow;if(!o)return;const e=i=>{const{width:n,height:h}=i;s({width:Math.round(n),height:Math.round(h)})};if(e(t.getBoundingClientRect()),!o.ResizeObserver)return()=>{};const a=new o.ResizeObserver(i=>{const n=i[0];if(n!=null&&n.borderBoxSize){const h=n.borderBoxSize[0];if(h){e({width:h.inlineSize,height:h.blockSize});return}}e(t.getBoundingClientRect())});return a.observe(t,{box:"border-box"}),()=>{a.unobserve(t)}},be={passive:!0},tt=typeof window>"u"?!0:"onscrollend"in window,lt=(l,s)=>{const t=l.scrollElement;if(!t)return;const o=l.targetWindow;if(!o)return;let e=0;const a=l.options.useScrollendEvent&&tt?()=>{}:Ye(o,()=>{s(e,!1)},l.options.isScrollingResetDelay),i=c=>()=>{const{horizontal:r,isRtl:v}=l.options;e=r?t.scrollLeft*(v&&-1||1):t.scrollTop,a(),s(e,c)},n=i(!0),h=i(!1);return h(),t.addEventListener("scroll",n,be),t.addEventListener("scrollend",h,be),()=>{t.removeEventListener("scroll",n),t.removeEventListener("scrollend",h)}},nt=(l,s,t)=>{if(s!=null&&s.borderBoxSize){const o=s.borderBoxSize[0];if(o)return Math.round(o[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(l.getBoundingClientRect()[t.options.horizontal?"width":"height"])},ot=(l,{adjustments:s=0,behavior:t},o)=>{var e,a;const i=l+s;(a=(e=o.scrollElement)==null?void 0:e.scrollTo)==null||a.call(e,{[o.options.horizontal?"left":"top"]:i,behavior:t})};class it{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const o=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(e=>{e.forEach(a=>{this._measureElement(a.target,a)})}));return{disconnect:()=>{var e;(e=o())==null||e.disconnect(),t=null},observe:e=>{var a;return(a=o())==null?void 0:a.observe(e,{box:"border-box"})},unobserve:e=>{var a;return(a=o())==null?void 0:a.unobserve(e)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([o,e])=>{typeof e>"u"&&delete t[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Xe,rangeExtractor:Ze,onChange:()=>{},measureElement:nt,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,...t}},this.notify=t=>{var o,e;(e=(o=this.options).onChange)==null||e.call(o,this,t)},this.maybeNotify=H(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const o=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==o){if(this.cleanup(),!o){this.maybeNotify();return}this.scrollElement=o,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(e=>{this.observer.observe(e)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,e=>{this.scrollRect=e,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(e,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<e?"forward":"backward":null,this.scrollOffset=e,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,o)=>{const e=new Map,a=new Map;for(let i=o-1;i>=0;i--){const n=t[i];if(e.has(n.lane))continue;const h=a.get(n.lane);if(h==null||n.end>h.end?a.set(n.lane,n):n.end<h.end&&e.set(n.lane,!0),e.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((i,n)=>i.end===n.end?i.index-n.index:i.end-n.end)[0]:void 0},this.getMeasurementOptions=H(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,o,e,a,i)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:o,scrollMargin:e,getItemKey:a,enabled:i}),{key:!1}),this.getMeasurements=H(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:o,scrollMargin:e,getItemKey:a,enabled:i},n)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(r=>{this.itemSizeCache.set(r.key,r.size)}));const h=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,h);for(let r=h;r<t;r++){const v=a(r),y=this.options.lanes===1?c[r-1]:this.getFurthestMeasurement(c,r),I=y?y.end+this.options.gap:o+e,C=n.get(v),A=typeof C=="number"?C:this.options.estimateSize(r),$=I+A,z=y?y.lane:r%this.options.lanes;c[r]={index:r,start:I,size:A,end:$,key:v,lane:z}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=H(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(t,o,e)=>this.range=t.length>0&&o>0?at({measurements:t,outerSize:o,scrollOffset:e}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=H(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(t,o,e,a)=>o===null?[]:t({startIndex:o.startIndex,endIndex:o.endIndex,overscan:e,count:a}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const o=this.options.indexAttribute,e=t.getAttribute(o);return e?parseInt(e,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(t,o)=>{const e=this.indexFromElement(t),a=this.measurementsCache[e];if(!a)return;const i=a.key,n=this.elementsCache.get(i);n!==t&&(n&&this.observer.unobserve(n),this.observer.observe(t),this.elementsCache.set(i,t)),t.isConnected&&this.resizeItem(e,this.options.measureElement(t,o,this))},this.resizeItem=(t,o)=>{const e=this.measurementsCache[t];if(!e)return;const a=this.itemSizeCache.get(e.key)??e.size,i=o-a;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(e,i,this):e.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(e.index),this.itemSizeCache=new Map(this.itemSizeCache.set(e.key,o)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((o,e)=>{o.isConnected||(this.observer.unobserve(o),this.elementsCache.delete(e))});return}this._measureElement(t,void 0)},this.getVirtualItems=H(()=>[this.getIndexes(),this.getMeasurements()],(t,o)=>{const e=[];for(let a=0,i=t.length;a<i;a++){const n=t[a],h=o[n];e.push(h)}return e},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const o=this.getMeasurements();if(o.length!==0)return re(o[Se(0,o.length-1,e=>re(o[e]).start,t)])},this.getOffsetForAlignment=(t,o)=>{const e=this.getSize(),a=this.getScrollOffset();o==="auto"&&t>=a+e&&(o="end"),o==="end"&&(t-=e);const i=this.options.horizontal?"scrollWidth":"scrollHeight",h=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[i]:this.scrollElement[i]:0)-e;return Math.max(Math.min(h,t),0)},this.getOffsetForIndex=(t,o="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const e=this.measurementsCache[t];if(!e)return;const a=this.getSize(),i=this.getScrollOffset();if(o==="auto")if(e.end>=i+a-this.options.scrollPaddingEnd)o="end";else if(e.start<=i+this.options.scrollPaddingStart)o="start";else return[i,o];const n=e.start-this.options.scrollPaddingStart+(e.size-a)/2;switch(o){case"center":return[this.getOffsetForAlignment(n,o),o];case"end":return[this.getOffsetForAlignment(e.end+this.options.scrollPaddingEnd,o),o];default:return[this.getOffsetForAlignment(e.start-this.options.scrollPaddingStart,o),o]}},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:o="start",behavior:e}={})=>{this.cancelScrollToIndex(),e==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,o),{adjustments:void 0,behavior:e})},this.scrollToIndex=(t,{align:o="auto",behavior:e}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),e==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const a=this.getOffsetForIndex(t,o);if(!a)return;const[i,n]=a;this._scrollToOffset(i,{adjustments:void 0,behavior:e}),e!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[c]=re(this.getOffsetForIndex(t,n));Qe(c,this.getScrollOffset())||this.scrollToIndex(t,{align:n,behavior:e})}else this.scrollToIndex(t,{align:n,behavior:e})}))},this.scrollBy=(t,{behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var t;const o=this.getMeasurements();let e;return o.length===0?e=this.options.paddingStart:e=this.options.lanes===1?((t=o[o.length-1])==null?void 0:t.end)??0:Math.max(...o.slice(-this.options.lanes).map(a=>a.end)),Math.max(e-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:o,behavior:e})=>{this.options.scrollToFn(t,{behavior:e,adjustments:o},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(s)}}const Se=(l,s,t,o)=>{for(;l<=s;){const e=(l+s)/2|0,a=t(e);if(a<o)l=e+1;else if(a>o)s=e-1;else return e}return l>0?l-1:0};function at({measurements:l,outerSize:s,scrollOffset:t}){const o=l.length-1,a=Se(0,o,n=>l[n].start,t);let i=a;for(;i<o&&l[i].end<t+s;)i++;return{startIndex:a,endIndex:i}}function st(l){const s=new it(P(l)),t=Me(s),o=s._didMount();return N(()=>P(l).getScrollElement(),e=>{e&&s._willUpdate()},{immediate:!0}),N(()=>P(l),e=>{s.setOptions({...e,onChange:(a,i)=>{var n;fe(t),(n=e.onChange)==null||n.call(e,a,i)}}),s._willUpdate(),fe(t)},{immediate:!0}),ze(o),t}function rt(l){return st(g(()=>({observeElementRect:et,observeElementOffset:lt,scrollToFn:ot,...P(l)})))}function ut(l,s,t){let o=k(t==null?void 0:t.value),e=g(()=>l.value!==void 0);return[g(()=>e.value?l.value:o.value),function(a){return e.value||(o.value=a),s==null?void 0:s(a)}]}function dt(){let l=de();return ge(()=>l.dispose()),l}function ct(){let l=dt();return s=>{l.dispose(),l.nextFrame(s)}}var Oe=(l=>(l[l.Left=0]="Left",l[l.Right=2]="Right",l))(Oe||{});function Ie(l={},s=null,t=[]){for(let[o,e]of Object.entries(l))Re(t,we(s,o),e);return t}function we(l,s){return l?l+"["+s+"]":s}function Re(l,s,t){if(Array.isArray(t))for(let[o,e]of t.entries())Re(l,we(s,o.toString()),e);else t instanceof Date?l.push([s,t.toISOString()]):typeof t=="boolean"?l.push([s,t?"1":"0"]):typeof t=="string"?l.push([s,t]):typeof t=="number"?l.push([s,`${t}`]):t==null?l.push([s,""]):Ie(t,s,l)}var vt={};function ft(l,s){return l===s}var pt=(l=>(l[l.Open=0]="Open",l[l.Closed=1]="Closed",l))(pt||{}),ht=(l=>(l[l.Single=0]="Single",l[l.Multi=1]="Multi",l))(ht||{}),mt=(l=>(l[l.Pointer=0]="Pointer",l[l.Focus=1]="Focus",l[l.Other=2]="Other",l))(mt||{});let Ce=Symbol("ComboboxContext");function Q(l){let s=ye(Ce,null);if(s===null){let t=new Error(`<${l} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Q),t}return s}let Ee=Symbol("VirtualContext"),bt=G({name:"VirtualProvider",setup(l,{slots:s}){let t=Q("VirtualProvider"),o=g(()=>{let n=O(t.optionsRef);if(!n)return{start:0,end:0};let h=window.getComputedStyle(n);return{start:parseFloat(h.paddingBlockStart||h.paddingTop),end:parseFloat(h.paddingBlockEnd||h.paddingBottom)}}),e=rt(g(()=>({scrollPaddingStart:o.value.start,scrollPaddingEnd:o.value.end,count:t.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return O(t.optionsRef)},overscan:12}))),a=g(()=>{var n;return(n=t.virtual.value)==null?void 0:n.options}),i=k(0);return N([a],()=>{i.value+=1}),xe(Ee,t.virtual.value?e:null),()=>[le("div",{style:{position:"relative",width:"100%",height:`${e.value.getTotalSize()}px`},ref:n=>{if(n){if(typeof process<"u"&&vt.JEST_WORKER_ID!==void 0||t.activationTrigger.value===0)return;t.activeOptionIndex.value!==null&&t.virtual.value.options.length>t.activeOptionIndex.value&&e.value.scrollToIndex(t.activeOptionIndex.value)}}},e.value.getVirtualItems().map(n=>Ve(s.default({option:t.virtual.value.options[n.index],open:t.comboboxState.value===0})[0],{key:`${i.value}-${n.index}`,"data-index":n.index,"aria-setsize":t.virtual.value.options.length,"aria-posinset":n.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${n.start}px)`,overflowAnchor:"none"}})))]}}),gt=G({name:"Combobox",emits:{"update:modelValue":l=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(l,{slots:s,attrs:t,emit:o}){let e=k(1),a=k(null),i=k(null),n=k(null),h=k(null),c=k({static:!1,hold:!1}),r=k([]),v=k(null),y=k(2),I=k(!1);function C(u=f=>f){let f=v.value!==null?r.value[v.value]:null,m=u(r.value.slice()),x=m.length>0&&m[0].dataRef.order.value!==null?m.sort((M,B)=>M.dataRef.order.value-B.dataRef.order.value):Le(m,M=>O(M.dataRef.domRef)),T=f?x.indexOf(f):null;return T===-1&&(T=null),{options:x,activeOptionIndex:T}}let A=g(()=>l.multiple?1:0),$=g(()=>l.nullable),[z,b]=ut(g(()=>l.modelValue),u=>o("update:modelValue",u),g(()=>l.defaultValue)),E=g(()=>z.value===void 0?J(A.value,{1:[],0:void 0}):z.value),F=null,p=null;function w(u){return J(A.value,{0(){return b==null?void 0:b(u)},1:()=>{let f=K(d.value.value).slice(),m=K(u),x=f.findIndex(T=>d.compare(m,K(T)));return x===-1?f.push(m):f.splice(x,1),b==null?void 0:b(f)}})}let R=g(()=>{});N([R],([u],[f])=>{if(d.virtual.value&&u&&f&&v.value!==null){let m=u.indexOf(f[v.value]);m!==-1?v.value=m:v.value=null}});let d={comboboxState:e,value:E,mode:A,compare(u,f){if(typeof l.by=="string"){let m=l.by;return(u==null?void 0:u[m])===(f==null?void 0:f[m])}return l.by===null?ft(u,f):l.by(u,f)},calculateIndex(u){return d.virtual.value?l.by===null?d.virtual.value.options.indexOf(u):d.virtual.value.options.findIndex(f=>d.compare(f,u)):r.value.findIndex(f=>d.compare(f.dataRef.value,u))},defaultValue:g(()=>l.defaultValue),nullable:$,immediate:g(()=>!1),virtual:g(()=>null),inputRef:i,labelRef:a,buttonRef:n,optionsRef:h,disabled:g(()=>l.disabled),options:r,change(u){b(u)},activeOptionIndex:g(()=>{if(I.value&&v.value===null&&(d.virtual.value?d.virtual.value.options.length>0:r.value.length>0)){if(d.virtual.value){let f=d.virtual.value.options.findIndex(m=>{var x;return!((x=d.virtual.value)!=null&&x.disabled(m))});if(f!==-1)return f}let u=r.value.findIndex(f=>!f.dataRef.disabled);if(u!==-1)return u}return v.value}),activationTrigger:y,optionsPropsRef:c,closeCombobox(){I.value=!1,!l.disabled&&e.value!==1&&(e.value=1,v.value=null)},openCombobox(){if(I.value=!0,!l.disabled&&e.value!==0){if(d.value.value){let u=d.calculateIndex(d.value.value);u!==-1&&(v.value=u)}e.value=0}},setActivationTrigger(u){y.value=u},goToOption(u,f,m){I.value=!1,F!==null&&cancelAnimationFrame(F),F=requestAnimationFrame(()=>{if(l.disabled||h.value&&!c.value.static&&e.value===1)return;if(d.virtual.value){v.value=u===V.Specific?f:me({focus:u},{resolveItems:()=>d.virtual.value.options,resolveActiveIndex:()=>{var M,B;return(B=(M=d.activeOptionIndex.value)!=null?M:d.virtual.value.options.findIndex(q=>{var Y;return!((Y=d.virtual.value)!=null&&Y.disabled(q))}))!=null?B:null},resolveDisabled:M=>d.virtual.value.disabled(M),resolveId(){throw new Error("Function not implemented.")}}),y.value=m??2;return}let x=C();if(x.activeOptionIndex===null){let M=x.options.findIndex(B=>!B.dataRef.disabled);M!==-1&&(x.activeOptionIndex=M)}let T=u===V.Specific?f:me({focus:u},{resolveItems:()=>x.options,resolveActiveIndex:()=>x.activeOptionIndex,resolveId:M=>M.id,resolveDisabled:M=>M.dataRef.disabled});v.value=T,y.value=m??2,r.value=x.options})},selectOption(u){let f=r.value.find(x=>x.id===u);if(!f)return;let{dataRef:m}=f;w(m.value)},selectActiveOption(){if(d.activeOptionIndex.value!==null){if(d.virtual.value)w(d.virtual.value.options[d.activeOptionIndex.value]);else{let{dataRef:u}=r.value[d.activeOptionIndex.value];w(u.value)}d.goToOption(V.Specific,d.activeOptionIndex.value)}},registerOption(u,f){let m=ke({id:u,dataRef:f});if(d.virtual.value){r.value.push(m);return}p&&cancelAnimationFrame(p);let x=C(T=>(T.push(m),T));v.value===null&&d.isSelected(f.value.value)&&(x.activeOptionIndex=x.options.indexOf(m)),r.value=x.options,v.value=x.activeOptionIndex,y.value=2,x.options.some(T=>!O(T.dataRef.domRef))&&(p=requestAnimationFrame(()=>{let T=C();r.value=T.options,v.value=T.activeOptionIndex}))},unregisterOption(u,f){if(F!==null&&cancelAnimationFrame(F),f&&(I.value=!0),d.virtual.value){r.value=r.value.filter(x=>x.id!==u);return}let m=C(x=>{let T=x.findIndex(M=>M.id===u);return T!==-1&&x.splice(T,1),x});r.value=m.options,v.value=m.activeOptionIndex,y.value=2},isSelected(u){return J(A.value,{0:()=>d.compare(K(d.value.value),K(u)),1:()=>K(d.value.value).some(f=>d.compare(K(f),K(u)))})},isActive(u){return v.value===d.calculateIndex(u)}};$e([i,n,h],()=>d.closeCombobox(),g(()=>e.value===0)),xe(Ce,d),Fe(g(()=>J(e.value,{0:oe.Open,1:oe.Closed})));let S=g(()=>{var u;return(u=O(i))==null?void 0:u.closest("form")});return ce(()=>{N([S],()=>{if(!S.value||l.defaultValue===void 0)return;function u(){d.change(l.defaultValue)}return S.value.addEventListener("reset",u),()=>{var f;(f=S.value)==null||f.removeEventListener("reset",u)}},{immediate:!0})}),()=>{var u,f,m;let{name:x,disabled:T,form:M,...B}=l,q={open:e.value===0,disabled:T,activeIndex:d.activeOptionIndex.value,activeOption:d.activeOptionIndex.value===null?null:d.virtual.value?d.virtual.value.options[(u=d.activeOptionIndex.value)!=null?u:0]:(m=(f=d.options.value[d.activeOptionIndex.value])==null?void 0:f.dataRef.value)!=null?m:null,value:E.value};return le(ue,[...x!=null&&E.value!=null?Ie({[x]:E.value}).map(([Y,Te])=>le(Je,_e({features:Ge.Hidden,key:Y,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:M,disabled:T,name:Y,value:Te}))):[],Z({theirProps:{...t,...ve(B,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:q,slots:s,attrs:t,name:"Combobox"})])}}}),xt=G({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(l,{attrs:s,slots:t,expose:o}){var e;let a=(e=l.id)!=null?e:`headlessui-combobox-button-${ae()}`,i=Q("ComboboxButton");o({el:i.buttonRef,$el:i.buttonRef});function n(r){i.disabled.value||(i.comboboxState.value===0?i.closeCombobox():(r.preventDefault(),i.openCombobox()),U(()=>{var v;return(v=O(i.inputRef))==null?void 0:v.focus({preventScroll:!0})}))}function h(r){switch(r.key){case D.ArrowDown:r.preventDefault(),r.stopPropagation(),i.comboboxState.value===1&&i.openCombobox(),U(()=>{var v;return(v=i.inputRef.value)==null?void 0:v.focus({preventScroll:!0})});return;case D.ArrowUp:r.preventDefault(),r.stopPropagation(),i.comboboxState.value===1&&(i.openCombobox(),U(()=>{i.value.value||i.goToOption(V.Last)})),U(()=>{var v;return(v=i.inputRef.value)==null?void 0:v.focus({preventScroll:!0})});return;case D.Escape:if(i.comboboxState.value!==0)return;r.preventDefault(),i.optionsRef.value&&!i.optionsPropsRef.value.static&&r.stopPropagation(),i.closeCombobox(),U(()=>{var v;return(v=i.inputRef.value)==null?void 0:v.focus({preventScroll:!0})});return}}let c=Ue(g(()=>({as:l.as,type:s.type})),i.buttonRef);return()=>{var r,v;let y={open:i.comboboxState.value===0,disabled:i.disabled.value,value:i.value.value},{...I}=l,C={ref:i.buttonRef,id:a,type:c.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(r=O(i.optionsRef))==null?void 0:r.id,"aria-expanded":i.comboboxState.value===0,"aria-labelledby":i.labelRef.value?[(v=O(i.labelRef))==null?void 0:v.id,a].join(" "):void 0,disabled:i.disabled.value===!0?!0:void 0,onKeydown:h,onClick:n};return Z({ourProps:C,theirProps:I,slot:y,attrs:s,slots:t,name:"ComboboxButton"})}}}),yt=G({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:l=>!0},setup(l,{emit:s,attrs:t,slots:o,expose:e}){var a;let i=(a=l.id)!=null?a:`headlessui-combobox-input-${ae()}`,n=Q("ComboboxInput"),h=g(()=>Be(O(n.inputRef))),c={value:!1};e({el:n.inputRef,$el:n.inputRef});function r(){n.change(null);let p=O(n.optionsRef);p&&(p.scrollTop=0),n.goToOption(V.Nothing)}let v=g(()=>{var p;let w=n.value.value;return O(n.inputRef)?typeof l.displayValue<"u"&&w!==void 0?(p=l.displayValue(w))!=null?p:"":typeof w=="string"?w:"":""});ce(()=>{N([v,n.comboboxState,h],([p,w],[R,d])=>{if(c.value)return;let S=O(n.inputRef);S&&((d===0&&w===1||p!==R)&&(S.value=p),requestAnimationFrame(()=>{var u;if(c.value||!S||((u=h.value)==null?void 0:u.activeElement)!==S)return;let{selectionStart:f,selectionEnd:m}=S;Math.abs((m??0)-(f??0))===0&&f===0&&S.setSelectionRange(S.value.length,S.value.length)}))},{immediate:!0}),N([n.comboboxState],([p],[w])=>{if(p===0&&w===1){if(c.value)return;let R=O(n.inputRef);if(!R)return;let d=R.value,{selectionStart:S,selectionEnd:u,selectionDirection:f}=R;R.value="",R.value=d,f!==null?R.setSelectionRange(S,u,f):R.setSelectionRange(S,u)}})});let y=k(!1);function I(){y.value=!0}function C(){de().nextFrame(()=>{y.value=!1})}let A=ct();function $(p){switch(c.value=!0,A(()=>{c.value=!1}),p.key){case D.Enter:if(c.value=!1,n.comboboxState.value!==0||y.value)return;if(p.preventDefault(),p.stopPropagation(),n.activeOptionIndex.value===null){n.closeCombobox();return}n.selectActiveOption(),n.mode.value===0&&n.closeCombobox();break;case D.ArrowDown:return c.value=!1,p.preventDefault(),p.stopPropagation(),J(n.comboboxState.value,{0:()=>n.goToOption(V.Next),1:()=>n.openCombobox()});case D.ArrowUp:return c.value=!1,p.preventDefault(),p.stopPropagation(),J(n.comboboxState.value,{0:()=>n.goToOption(V.Previous),1:()=>{n.openCombobox(),U(()=>{n.value.value||n.goToOption(V.Last)})}});case D.Home:if(p.shiftKey)break;return c.value=!1,p.preventDefault(),p.stopPropagation(),n.goToOption(V.First);case D.PageUp:return c.value=!1,p.preventDefault(),p.stopPropagation(),n.goToOption(V.First);case D.End:if(p.shiftKey)break;return c.value=!1,p.preventDefault(),p.stopPropagation(),n.goToOption(V.Last);case D.PageDown:return c.value=!1,p.preventDefault(),p.stopPropagation(),n.goToOption(V.Last);case D.Escape:if(c.value=!1,n.comboboxState.value!==0)return;p.preventDefault(),n.optionsRef.value&&!n.optionsPropsRef.value.static&&p.stopPropagation(),n.nullable.value&&n.mode.value===0&&n.value.value===null&&r(),n.closeCombobox();break;case D.Tab:if(c.value=!1,n.comboboxState.value!==0)return;n.mode.value===0&&n.activationTrigger.value!==1&&n.selectActiveOption(),n.closeCombobox();break}}function z(p){s("change",p),n.nullable.value&&n.mode.value===0&&p.target.value===""&&r(),n.openCombobox()}function b(p){var w,R,d;let S=(w=p.relatedTarget)!=null?w:he.find(u=>u!==p.currentTarget);if(c.value=!1,!((R=O(n.optionsRef))!=null&&R.contains(S))&&!((d=O(n.buttonRef))!=null&&d.contains(S))&&n.comboboxState.value===0)return p.preventDefault(),n.mode.value===0&&(n.nullable.value&&n.value.value===null?r():n.activationTrigger.value!==1&&n.selectActiveOption()),n.closeCombobox()}function E(p){var w,R,d;let S=(w=p.relatedTarget)!=null?w:he.find(u=>u!==p.currentTarget);(R=O(n.buttonRef))!=null&&R.contains(S)||(d=O(n.optionsRef))!=null&&d.contains(S)||n.disabled.value||n.immediate.value&&n.comboboxState.value!==0&&(n.openCombobox(),de().nextFrame(()=>{n.setActivationTrigger(1)}))}let F=g(()=>{var p,w,R,d;return(d=(R=(w=l.defaultValue)!=null?w:n.defaultValue.value!==void 0?(p=l.displayValue)==null?void 0:p.call(l,n.defaultValue.value):null)!=null?R:n.defaultValue.value)!=null?d:""});return()=>{var p,w,R,d,S,u,f;let m={open:n.comboboxState.value===0},{displayValue:x,onChange:T,...M}=l,B={"aria-controls":(p=n.optionsRef.value)==null?void 0:p.id,"aria-expanded":n.comboboxState.value===0,"aria-activedescendant":n.activeOptionIndex.value===null?void 0:n.virtual.value?(w=n.options.value.find(q=>!n.virtual.value.disabled(q.dataRef.value)&&n.compare(q.dataRef.value,n.virtual.value.options[n.activeOptionIndex.value])))==null?void 0:w.id:(R=n.options.value[n.activeOptionIndex.value])==null?void 0:R.id,"aria-labelledby":(u=(d=O(n.labelRef))==null?void 0:d.id)!=null?u:(S=O(n.buttonRef))==null?void 0:S.id,"aria-autocomplete":"list",id:i,onCompositionstart:I,onCompositionend:C,onKeydown:$,onInput:z,onFocus:E,onBlur:b,role:"combobox",type:(f=t.type)!=null?f:"text",tabIndex:0,ref:n.inputRef,defaultValue:F.value,disabled:n.disabled.value===!0?!0:void 0};return Z({ourProps:B,theirProps:M,slot:m,attrs:t,slots:o,features:ie.RenderStrategy|ie.Static,name:"ComboboxInput"})}}}),St=G({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(l,{attrs:s,slots:t,expose:o}){let e=Q("ComboboxOptions"),a=`headlessui-combobox-options-${ae()}`;o({el:e.optionsRef,$el:e.optionsRef}),ne(()=>{e.optionsPropsRef.value.static=l.static}),ne(()=>{e.optionsPropsRef.value.hold=l.hold});let i=je(),n=g(()=>i!==null?(i.value&oe.Open)===oe.Open:e.comboboxState.value===0);qe({container:g(()=>O(e.optionsRef)),enabled:g(()=>e.comboboxState.value===0),accept(c){return c.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:c.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(c){c.setAttribute("role","none")}});function h(c){c.preventDefault()}return()=>{var c,r,v;let y={open:e.comboboxState.value===0},I={"aria-labelledby":(v=(c=O(e.labelRef))==null?void 0:c.id)!=null?v:(r=O(e.buttonRef))==null?void 0:r.id,id:a,ref:e.optionsRef,role:"listbox","aria-multiselectable":e.mode.value===1?!0:void 0,onMousedown:h},C=ve(l,["hold"]);return Z({ourProps:I,theirProps:C,slot:y,attrs:s,slots:e.virtual.value&&e.comboboxState.value===0?{...t,default:()=>[le(bt,{},t.default)]}:t,features:ie.RenderStrategy|ie.Static,visible:n.value,name:"ComboboxOptions"})}}}),Ot=G({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(l,{slots:s,attrs:t,expose:o}){let e=Q("ComboboxOption"),a=`headlessui-combobox-option-${ae()}`,i=k(null),n=g(()=>l.disabled);o({el:i,$el:i});let h=g(()=>{var b;return e.virtual.value?e.activeOptionIndex.value===e.calculateIndex(l.value):e.activeOptionIndex.value===null?!1:((b=e.options.value[e.activeOptionIndex.value])==null?void 0:b.id)===a}),c=g(()=>e.isSelected(l.value)),r=ye(Ee,null),v=g(()=>({disabled:l.disabled,value:l.value,domRef:i,order:g(()=>l.order)}));ce(()=>e.registerOption(a,v)),ge(()=>e.unregisterOption(a,h.value)),ne(()=>{let b=O(i);b&&(r==null||r.value.measureElement(b))}),ne(()=>{e.comboboxState.value===0&&h.value&&(e.virtual.value||e.activationTrigger.value!==0&&U(()=>{var b,E;return(E=(b=O(i))==null?void 0:b.scrollIntoView)==null?void 0:E.call(b,{block:"nearest"})}))});function y(b){b.preventDefault(),b.button===Oe.Left&&(n.value||(e.selectOption(a),Ne()||requestAnimationFrame(()=>{var E;return(E=O(e.inputRef))==null?void 0:E.focus({preventScroll:!0})}),e.mode.value===0&&e.closeCombobox()))}function I(){var b;if(l.disabled||(b=e.virtual.value)!=null&&b.disabled(l.value))return e.goToOption(V.Nothing);let E=e.calculateIndex(l.value);e.goToOption(V.Specific,E)}let C=He();function A(b){C.update(b)}function $(b){var E;if(!C.wasMoved(b)||l.disabled||(E=e.virtual.value)!=null&&E.disabled(l.value)||h.value)return;let F=e.calculateIndex(l.value);e.goToOption(V.Specific,F,0)}function z(b){var E;C.wasMoved(b)&&(l.disabled||(E=e.virtual.value)!=null&&E.disabled(l.value)||h.value&&(e.optionsPropsRef.value.hold||e.goToOption(V.Nothing)))}return()=>{let{disabled:b}=l,E={active:h.value,selected:c.value,disabled:b},F={id:a,ref:i,role:"option",tabIndex:b===!0?void 0:-1,"aria-disabled":b===!0?!0:void 0,"aria-selected":c.value,disabled:void 0,onMousedown:y,onFocus:I,onPointerenter:A,onMouseenter:A,onPointermove:$,onMousemove:$,onPointerleave:z,onMouseleave:z},p=ve(l,["order","value"]);return Z({ourProps:F,theirProps:p,slot:E,attrs:t,slots:s,name:"ComboboxOption"})}}});function It(l,s){return j(),L("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"})])}const wt={key:0,class:"block text-sm font-medium text-gray-700 mb-1"},Rt={class:"relative"},Ct={class:"relative"},Et={class:"relative w-full cursor-default overflow-hidden rounded-lg bg-white text-left border border-gray-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-primary-300 sm:text-sm"},Tt={class:"flex flex-wrap gap-2 p-1"},Mt=["onClick"],zt={key:0,class:"relative cursor-default select-none py-2 px-4 text-gray-700"},kt={key:1,class:"mt-2 text-sm text-red-600"},Ft={__name:"MultiSelect",props:{modelValue:{type:Array,default:()=>[]},options:{type:Array,required:!0},label:{type:String,required:!0},error:{type:String,default:""},valueKey:{type:String,default:"id"},labelKey:{type:String,default:"name"}},emits:["update:modelValue"],setup(l,{emit:s}){const t=l,o=s,e=k(""),a=k(t.modelValue);N(()=>t.modelValue,c=>{a.value=c}),N(a,c=>{o("update:modelValue",c)});const i=g(()=>e.value===""?t.options:t.options.filter(c=>c[t.labelKey].toLowerCase().replace(/\s+/g,"").includes(e.value.toLowerCase().replace(/\s+/g,"")))),n=g(()=>t.options.filter(c=>a.value.includes(c[t.valueKey])).map(c=>c[t.labelKey])),h=c=>{const r=[...a.value];r.splice(c,1),a.value=r};return(c,r)=>(j(),L("div",null,[l.label?(j(),L("label",wt,ee(l.label),1)):te("",!0),_("div",Rt,[W(P(gt),{modelValue:a.value,"onUpdate:modelValue":r[2]||(r[2]=v=>a.value=v),multiple:""},{default:X(()=>[_("div",Ct,[_("div",Et,[_("div",Tt,[(j(!0),L(ue,null,pe(n.value,(v,y)=>(j(),L("div",{key:y,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800"},[Ae(ee(v)+" ",1),_("button",{type:"button",class:"flex-shrink-0 ml-0.5 h-4 w-4 rounded-full inline-flex items-center justify-center text-primary-400 hover:bg-primary-200 hover:text-primary-500 focus:outline-none focus:bg-primary-500 focus:text-white",onClick:De(I=>h(y),["stop"])},[r[3]||(r[3]=_("span",{class:"sr-only"},"Remove",-1)),W(P(Ke),{class:"h-3 w-3","aria-hidden":"true"})],8,Mt)]))),128)),W(P(yt),{class:"w-full border-none py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",displayValue:()=>"",onChange:r[0]||(r[0]=v=>e.value=v.target.value),placeholder:"Search..."})]),W(P(xt),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:X(()=>[W(P(It),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),W(P(We),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:r[1]||(r[1]=v=>e.value="")},{default:X(()=>[W(P(St),{class:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm z-10"},{default:X(()=>[i.value.length===0&&e.value!==""?(j(),L("div",zt," Nothing found. ")):te("",!0),(j(!0),L(ue,null,pe(i.value,v=>(j(),Pe(P(Ot),{key:v[l.valueKey],value:v[l.valueKey]},{default:X(({selected:y,active:I})=>[_("div",{class:se(["relative cursor-default select-none py-2 pl-10 pr-4",I?"bg-primary-600 text-white":"text-gray-900"])},[_("span",{class:se(["block truncate",y?"font-medium":"font-normal"])},ee(v[l.labelKey]),3),y?(j(),L("span",{key:0,class:se(["absolute inset-y-0 left-0 flex items-center pl-3",I?"text-white":"text-primary-600"])},r[4]||(r[4]=[_("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[_("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]),2)):te("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),l.error?(j(),L("p",kt,ee(l.error),1)):te("",!0)]))}};export{Ft as _};
